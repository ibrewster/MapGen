<!DOCTYPE html>
<html>

<head>
    <title>AVO MapGen</title>
    <link rel="stylesheet" href="static/styles/leaflet.css" />
    <link rel="stylesheet" href="static/styles/jquery-ui.min.css">
    <link rel="stylesheet" href="static/styles/index-1.css">


    <script src="static/scripts/jquery-3.6.0.min.js" defer></script>
    <script src="static/scripts/jquery-ui.min.js" defer></script>
    <script src="static/scripts/leaflet.js" defer></script>
    <script src="static/scripts/Leaflet.Graticule.js" defer></script>
    <script src="static/scripts/jquery.csv.js" defer></script>
    <script src="static/scripts/main-1.js" defer></script>

</head>

<body>
    <!--Click map for colormap selector-->
    <map name="cmMap">
        <area shape="rect" coords="2,29,457,112" class=cmArea data-cm="abyss" alt="abyss">
        <area shape="rect" coords="2,118,457,201" class=cmArea data-cm="cool" alt="cool">
        <area shape="rect" coords="2,207,457,290" class=cmArea data-cm="cubhelix" alt="cubhelix">
        <area shape="rect" coords="2,296,457,379" class=cmArea data-cm="dem1" alt="dem1">
        <area shape="rect" coords="2,385,457,468" class=cmArea data-cm="dem3" alt="dem3">
        <area shape="rect" coords="2,474,457,557" class=cmArea data-cm="drywet" alt="drywet">
        <area shape="rect" coords="2,563,457,646" class=cmArea data-cm="elevation" alt="elevation">
        <area shape="rect" coords="2,652,457,735" class=cmArea data-cm="gebco" alt="gebco">
        <area shape="rect" coords="2,741,457,824" class=cmArea data-cm="globe" alt="globe">
        <area shape="rect" coords="2,830,457,913" class=cmArea data-cm="haxby" alt="haxby">
        <area shape="rect" coords="2,919,457,1002" class=cmArea data-cm="ibcso" alt="ibcso">
        <area shape="rect" coords="2,1008,457,1091" class=cmArea data-cm="jet" alt="jet">
        <area shape="rect" coords="2,1097,457,1180" class=cmArea data-cm="magma" alt="magma">
        <area shape="rect" coords="2,1186,457,1269" class=cmArea data-cm="no_green" alt="no_green">
        <area shape="rect" coords="2,1275,457,1358" class=cmArea data-cm="panoply" alt="panoply">
        <area shape="rect" coords="2,1364,457,1447" class=cmArea data-cm="polar" alt="polar">
        <area shape="rect" coords="2,1453,457,1536" class=cmArea data-cm="red2green" alt="red2green">
        <area shape="rect" coords="2,1542,457,1625" class=cmArea data-cm="seafloor" alt="seafloor">
        <area shape="rect" coords="2,1631,457,1714" class=cmArea data-cm="seis" alt="seis">
        <area shape="rect" coords="2,1720,457,1803" class=cmArea data-cm="terra" alt="terra">
        <area shape="rect" coords="2,1809,457,1892" class=cmArea data-cm="turbo" alt="turbo">
        <area shape="rect" coords="2,1898,457,1981" class=cmArea data-cm="world" alt="world">
        <area shape="rect" coords="460,29,915,112" class=cmArea data-cm="bathy" alt="bathy">
        <area shape="rect" coords="460,118,915,201" class=cmArea data-cm="copper" alt="copper">
        <area shape="rect" coords="460,207,915,290" class=cmArea data-cm="cyclic" alt="cyclic">
        <area shape="rect" coords="460,296,915,379" class=cmArea data-cm="dem2" alt="dem2">
        <area shape="rect" coords="460,385,915,468" class=cmArea data-cm="dem4" alt="dem4">
        <area shape="rect" coords="460,474,915,557" class=cmArea data-cm="earth" alt="earth">
        <area shape="rect" coords="460,563,915,646" class=cmArea data-cm="etopo1" alt="etopo1">
        <area shape="rect" coords="460,652,915,735" class=cmArea data-cm="geo" alt="geo">
        <area shape="rect" coords="460,741,915,824" class=cmArea data-cm="gray" alt="gray">
        <area shape="rect" coords="460,830,915,913" class=cmArea data-cm="hot" alt="hot">
        <area shape="rect" coords="460,919,915,1002" class=cmArea data-cm="inferno" alt="inferno">
        <area shape="rect" coords="460,1008,915,1091" class=cmArea data-cm="mag" alt="mag">
        <area shape="rect" coords="460,1097,915,1180" class=cmArea data-cm="nighttime" alt="nighttime">
        <area shape="rect" coords="460,1186,915,1269" class=cmArea data-cm="ocean" alt="ocean">
        <area shape="rect" coords="460,1275,915,1358" class=cmArea data-cm="plasma" alt="plasma">
        <area shape="rect" coords="460,1364,915,1447" class=cmArea data-cm="rainbow" alt="rainbow">
        <area shape="rect" coords="460,1453,915,1536" class=cmArea data-cm="relief" alt="relief">
        <area shape="rect" coords="460,1542,915,1625" class=cmArea data-cm="sealand" alt="sealand">
        <area shape="rect" coords="460,1631,915,1714" class=cmArea data-cm="split" alt="split">
        <area shape="rect" coords="460,1720,915,1803" class=cmArea data-cm="topo" alt="topo">
        <area shape="rect" coords="460,1809,915,1892" class=cmArea data-cm="viridis" alt="viridis">
        <area shape="rect" coords="460,1898,915,1981" class=cmArea data-cm="wysiwyg" alt="wysiwyg">
    </map>

    <div id="downloading" style="display:none">
        <div id="downloadContent">
            Generating map image.
            <br>This may take a few minutes.
            <br> Please wait...
            <div>
                <div id="genInfo">
                    <div id="downloadStatus"></div>
                    <div id="genProgress">
                        <progress id="progBar" max="100"></progress>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="main">
        <div id="setup">
            <div id="setupInner">
                <form id="setupForm" enctype="multipart/form-data" action="getMap" method="POST">
                    <input type=hidden name="socketID" id="socketID" />
                    <div class="setupHeader">
                        Map Location
                        <div class="help">
                            <div class="helpText">
                                <p>Set the position and bounds of the map</p>
                                <p>When entering latitude/longitude bounds, the map will adjust
                                    to display the <i>full</i> range entered. Actual bounds displayed
                                    may vary somewhat due to map shape.
                                </p>

                                    <p>
                                    Click the refresh button here to reset the entered values to those
                                    actually displayed on the map.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="setupContent">
                        <select id="mapLocation">
                            <option value="Alaska" data-loc=[55.5,-164,5]>Alaska</option>
                            <option value="Wrangell" data-loc=[62.0057,-144.0194,9]>Wrangell</option>
                            <option value="Cook_Inlet" data-loc=[60.0,-152.5,8]>Cook Inlet</option>
                            <option value="Spurr" data-loc=[61.2989,-152.2539,10]>Spurr</option>
                            <option value="Redoubt" data-loc=[60.4852,-152.7438,11]>Redoubt</option>
                            <option value="Iliamna" data-loc=[60.0319,-153.0918,11]>Iliamna</option>
                            <option value="Augustine" data-loc=[59.3626,-153.435,12]>Augustine</option>
                            <option value="Fourpeaked" data-loc=[58.7703,-153.6738,11]>Fourpeaked</option>
                            <option value="Katmai_Region" data-loc=[58.3,-154.8,9]>Katmai Region</option>
                            <option value="Snowy" data-loc=[58.3336,-154.6859,12]>Snowy</option>
                            <option value="Griggs" data-loc=[58.3572,-155.1037,12]>Griggs</option>
                            <option value="Katmai" data-loc=[58.279,-154.9533,12]>Katmai</option>
                            <option value="Novarupta" data-loc=[58.2654,-155.1591,12]>Novarupta</option>
                            <option value="Trident" data-loc=[58.235,-155.104,12]>Trident</option>
                            <option value="Mageik" data-loc=[58.1946,-155.2544,12]>Mageik</option>
                            <option value="Martin" data-loc=[58.1692,-155.3566,12]>Martin</option>
                            <option value="Ugashik-Peulik" data-loc=[57.7503,-156.37,11]>Ugashik-Peulik</option>
                            <option value="Aniakchak" data-loc=[56.88149,-158.15456,11]>Aniakchak</option>
                            <option value="Veniaminof" data-loc=[56.1979,-159.3931,10]>Veniaminof</option>
                            <option value="Cold_Bay" data-loc=[55.4,-161.5,9]>Cold Bay</option>
                            <option value="Pavlof" data-loc=[55.4173,-161.8937,11]>Pavlof</option>
                            <option value="Dutton" data-loc=[55.1867,-162.2744,11]>Dutton</option>
                            <option value="Unimak_Island" data-loc=[54.7,-163.9,10]>Unimak Island</option>
                            <option value="Shishaldin" data-loc=[54.7554,-163.9711,11]>Shishaldin</option>
                            <option value="Westdahl" data-loc=[54.5171,-164.6476,11]>Westdahl</option>
                            <option value="Akutan" data-loc=[54.1331,-165.9856,11]>Akutan</option>
                            <option value="Makushin" data-loc=[53.8899,-166.925,10]>Makushin</option>
                            <option value="Bogoslof Island" data-loc=[53.9272,-168.0344,11]>Bogoslof Island</option>
                            <option value="Okmok" data-loc=[53.397,-168.166,10]>Okmok</option>
                            <option value="Cleveland" data-loc=[52.8222,-169.945,10]>Cleveland</option>
                            <option value="Korovin" data-loc=[52.3817,-174.1653,11]>Korovin</option>
                            <option value="Great_Sitkin" data-loc=[52.0765,-176.1109,11]>Great Sitkin</option>
                            <option value="Kanaga" data-loc=[51.9242,-177.1623,11]>Kanaga</option>
                            <option value="Tanaga" data-loc=[51.884,-178.143,10]>Tanaga</option>
                            <option value="Gareloi" data-loc=[51.7892,-178.796,12]>Gareloi</option>
                            <option value="Semisopochnoi" data-loc=[51.9288,179.5977,11]>Semisopochnoi</option>
                            <option value="Little_Sitkin" data-loc=[51.9531,178.5356,11]>Little Sitkin</option>
                        </select>
                        <input type="hidden" id="mapBounds" name="bounds" />
                        <input type="hidden" id="mapZoom" name="mapZoom" />
                        <div id="latLonLimits">
                            <div class="reload" tooltip="Set to map bounds">⟳</div>
                            <div class="topTitle">Min</div>
                            <div class="topTitle">Max</div>

                            <div class="leftTitle">Lat</div>
                            <div class="gridCell"><input id="minLat" class="latLon" type="number" min=-90 max=90 step=".001"></div>
                            <div class="gridCell"><input id="maxLat" class="latLon" type="number" min=-90 max=90 step=".001"></div>

                            <div class="leftTitle">Lon</div>
                            <div class="gridCell"><input id="minLon" class="latLon" type="number" min=-360 max=180 step=".001"></div>
                            <div class="gridCell"><input id="maxLon" class="latLon" type="number" min=-360 max=180 step=".001"></div>
                        </div>
                    </div>

                    <div class="setupHeader">
                        Map Size
                        <div class="help">
                            <div class="helpText">
                                <p>
                                    The size of the <i>generated</i> map, in the selected units (inches, centimeters, or pixels)
                                </p>
                                <p><b>NOTE:</b>The size entered applies to the <i>map area</i> ONLY. 
                                    The final size of the image generated will be somewhat larger to allow room for axis labels,
                                    colorbar (if applicable), etc.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="setupContent">
                        <div id="size">
                            <span class="sizeLabel">Width:</span>
                            <span></span>
                            <span class="sizeLabel">Height:</span>
                            <span><input class="mapSize" id="mapWidth" name="width" type="number" min=32 max="9999" value="10"></span>
                            <span id="xMarker">X</span>
                            <span><input class="mapSize" id="mapHeight" name="height" type="number" min=32 max="9999" value="7.5"></span>
                            <span class="rightJustify">Units:</span>
                            <select class="cols2" id="sizeUnits" name="unit">
                                <option value="p">Pixels</option>
                                <option value="i" selected>Inches</option>
                                <option value="c">cm</option>
                            </select>
                        </div>
                    </div>

                    <div class="setupHeader">Overview Map</div>
                    <div class="setupContent">
                        Show Map:
                        <select id=overview name="overview">
                            <option value="False">None</option>
                            <option value="BR" selected>Bottom Right</option>
                            <option value="BL">Bottom Left</option>
                            <option value="TR">Top Right</option>
                            <option value="TL">Top Left</option>
                        </select>
                        <br>Width:
                        <input type="number" min=0 max=9999 name="overviewWidth" id="overviewWidth" value="2.5">
                        <span id="overviewUnits"></span>
                        <div><input type="checkbox" id="lockWidth" checked>Lock to map width</div>
                        <button type="button" id="resetOverview">Reset View</button>
                        <input type="hidden" id="overviewBounds" name="overviewBounds">
                    </div>

                    <div class="setupHeader">Overlay Image</div>
                    <div class="setupContent leftJustify">
                        Type:
                        <select id="overlayFormat" name="imgType">
                            <option value="t">GeoTIFF</option>
                            <option value="j">Image & World</option>
                        </select>
                        <div id="overlayFiles">

                        </div>
                    </div>

                    <!--General map options-->
                    <div class="setupHeader">Options</div>
                    <div class="setupContent">
                        Show Scale:
                        <select id=showScale name="scale">
                            <option value="False">None</option>
                            <option value="BR">Bottom Right</option>
                            <option value="BC">Bottom Center</option>
                            <option value="BL" selected>Bottom Left</option>
                            <option value="TR">Top Right</option>
                            <option value="TC">Top Center</option>
                            <option value="TL">Top Left</option>
                        </select>
                        <br> Map Colormap: <input id="mapColormap" type=text size=9 name="mapColormap" placeholder="auto" value="etopo1"> 
                        <button type="button" class="setCM" data-target="mapColormap">Select</button>
                    </div>
                    <!--End general map options-->

                    <!--Inset Maps-->
                    <div class="setupHeader">Inset Map(s)</div>
                    <div class="setupContent blockDisplay">
                        <button type="button" id="addNewMap">Add New</button>
                        <div id="insetMaps" class="insetMapList">
                        </div>
                    </div>
                    <!--End inset maps-->

                    <!--Data plot CSV upload-->
                    <div class="setupHeader">
                        Data Plot
                        <div class=help>
                            <div class="helpText">
                                <p>Plot data from a CSV on map</p>
                                <ul>
                                    <li>
                                        Colormap: The colormap to use to plot the value column<br>
                                        All <a target="_blank" href="https://docs.generic-mapping-tools.org/6.2/cookbook/cpts.html#built-in-color-palette-tables-cpt">Built-in colormaps</a> supported by GMT are valid.
                                    </li>
                                    <li>
                                        Show Colorbar: Which side of the map to display the colorbar on, or None to not display it
                                    </li>
                                    <li>
                                        Units: Value units to display to the right or top of the colorbar.
                                        <ul>
                                            <li>
                                                Will not be displayed if "Show Colorbar" is set to "None"
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        Show Title: If checked, display the column header for the "Value" column above the colorbar
                                        <ul>
                                            <li>
                                                Will not be displayed if "Show Colorbar" is set to "None"
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        Range: The range of values to scale the colorbar to.
                                        <ul>
                                            <li>Auto-scaled to data min/max values if blank</li>
                                            <li>The color of values outside this range is undefined</li>
                                        </ul>
                                    </li>
                                    <li>
                                        CSV: The CSV file containing the data to be plotted
                                    </li>
                                    <li>
                                        Latitude, Longitude, Value: The columns from the CSV to use for latitude, longitude, and value
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="setupContent blockDisplay">
                        <div id="DataSetup">
                            Colormap:
                            <input type="text" name="colorMap" id="colormap" value="jet"> 
                            <button type="button" class="setCM" data-target="colormap">Select</button>
                            <br> Show Colorbar: <select id=showColorbar name="colorbar">
                                <option value="False">None</option>
                                <option value="MR">Right</option>
                                <option value="BC" selected>Bottom</option>
                                <option value="TC">Top</option>
                            </select>
                            <br>
                            Units: <input type="text" maxlength=4 size=4 name="scaleunits">
                            Show Title: <input type=checkbox name="showCMTitle" checked>
                            <div id="colormapRange">
                                Range:
                                <input type="number" class="numsonly" name="cmMin" placeholder="auto"> -
                                <input type="number" class="numsonly" name="cmMax" placeholder="auto">
                            </div>
                        </div>
                        <div id="dataCSV">
                            CSV: <input type=file id="plotDataCSV" name="plotData">
                        </div>
                        <div id="dataHeaders">
                            <div>Latitude</div>
                            <div>Longitude</div>
                            <div>Value</div>
                            <select id="latCol" name="latcol"></select>
                            <select id="lonCol" name="loncol"></select>
                            <select id="valCol" name="valcol"></select>
                        </div>
                    </div>
                    <!--End data plot CSV upload-->

                    <!--Station Selector Sidebar-->
                    <div class="setupHeader">
                        <span class="leftEdge"><input type="checkbox" id="stationSelAll">All</span> Stations
                    </div>
                    <div class="setupContent blockDisplay">
                        <div id="LegendSetup">
                            Show Legend:
                            <select id=legendShow name="legend">
                                <option value="False">None</option>
                                <option value="BR">Bottom Right</option>
                                <option value="BC">Bottom Center</option>
                                <option value="BL">Bottom Left</option>
                                <option value="TR" selected>Top Right</option>
                                <option value="TC">Top Center</option>
                                <option value="TL">Top Left</option>
                            </select>
                        </div>
                        <div id="stationCSV">
                            Upload CSV:<br>
                            <input type=file id="addStationCSV">
                        </div>
                        <div id="stationListTop">

                        </div>
                    </div>

                </form>
            </div>
            <div id="endButtons">
                <button id="getMap">Get Map</button>
            </div>
        </div>

        <div id="cmSelector">
            <div id="cmTitle">
                Click a colormap
            </div>
            <div id="cmImage">
                <img src='static/img/GMT_App_M_1a.png' alt="colormaps" usemap="#cmMap">
            </div>
            <div id="cmFooter">
                <button id="cmCancel">Cancel</button>
            </div>
        </div>

        <div id="mapContainer">
            <div id="maps">
                <div id="overviewMap" class="insetMap" style="display:none">
                </div>
                <div id="topMap">
                </div>
            </div>

        </div>
    </div>

</body>

</html>